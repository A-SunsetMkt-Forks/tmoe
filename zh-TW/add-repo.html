<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js ayu">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>新增倉庫 - 天萌參考手冊 正體中文版</title>
        <!-- Custom HTML head -->
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">
        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="assets/css/style-20220514.css">
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "ayu";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('ayu')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="prologue.html">序章</a></li><li class="spacer"></li><li class="chapter-item expanded "><a href="repo.html"><strong aria-hidden="true">1.</strong> 倉庫</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="add-repo.html" class="active"><strong aria-hidden="true">1.1.</strong> 新增倉庫</a></li><li class="chapter-item expanded "><a href="mirror-repo.html"><strong aria-hidden="true">1.2.</strong> 更換映象源</a></li></ol></li><li class="chapter-item expanded "><a href="container.html"><strong aria-hidden="true">2.</strong> 容器</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="docker-container.html"><strong aria-hidden="true">2.1.</strong> docker</a></li><li class="chapter-item expanded "><a href="android.html"><strong aria-hidden="true">2.2.</strong> android</a></li></ol></li><li class="chapter-item expanded "><a href="configuration.html"><strong aria-hidden="true">3.</strong> 配置</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="toml.html"><strong aria-hidden="true">3.1.</strong> toml</a></li></ol></li><li class="chapter-item expanded "><a href="env.html"><strong aria-hidden="true">4.</strong> 環境</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="editor.html"><strong aria-hidden="true">4.1.</strong> 編輯器</a></li></ol></li><li class="chapter-item expanded "><a href="appendix.html"><strong aria-hidden="true">5.</strong> 附錄</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="appendix_region-code.html"><strong aria-hidden="true">5.1.</strong> 區域代號</a></li><li class="chapter-item expanded "><a href="appendix_todo.html"><strong aria-hidden="true">5.2.</strong> todo</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu (default)</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">天萌參考手冊 正體中文版</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/2moe/tmoe/tree/doc" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                    <!-- Page table of contents -->
                    <div class="sidetoc"><nav class="pagetoc"></nav></div>

                        <h1 id="新增倉庫"><a class="header" href="#新增倉庫">新增倉庫</a></h1>
<ul>
<li><a href="#1-%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B">1. 快速上手</a>
<ul>
<li><a href="#11-apt">1.1. apt</a>
<ul>
<li><a href="#111-debian">1.1.1. debian</a></li>
<li><a href="#112-ubuntu">1.1.2. ubuntu</a></li>
<li><a href="#113-termux">1.1.3. termux</a></li>
</ul>
</li>
<li><a href="#12-pacman">1.2. pacman</a></li>
</ul>
</li>
<li><a href="#2-debian-based-ubuntu-mint-kali">2. Debian-based (ubuntu, mint, kali)</a>
<ul>
<li><a href="#21-%E9%80%9A%E7%94%A8">2.1. 通用</a>
<ul>
<li><a href="#211-%E8%A9%B3%E7%B4%B0%E8%AA%AA%E6%98%8E">2.1.1. 詳細說明</a></li>
<li><a href="#212-neko-repo-%E8%A9%B3%E6%83%85">2.1.2. neko-repo 詳情</a></li>
<li><a href="#213-%E6%9B%B4%E6%96%B0%E5%85%AC%E9%91%B0">2.1.3. 更新公鑰</a></li>
</ul>
</li>
<li><a href="#22-toy-repo">2.2. toy-repo</a>
<ul>
<li><a href="#221-%E8%A9%B3%E6%83%85">2.2.1. 詳情</a></li>
</ul>
</li>
<li><a href="#23-uuu-repo">2.3. uuu-repo</a>
<ul>
<li><a href="#231-%E8%AA%AA%E6%98%8E">2.3.1. 說明</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#3-android">3. Android</a>
<ul>
<li><a href="#31-termux">3.1. termux</a>
<ul>
<li><a href="#311-tinor">3.1.1. tinor</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#4-%E9%A1%8C%E5%A4%96%E8%A9%B1">4. 題外話</a>
<ul>
<li><a href="#41-%E6%82%A8%E5%8F%AF%E8%83%BD%E4%B8%8D%E9%9C%80%E8%A6%81%E4%BA%86%E8%A7%A3%E7%9A%84%E7%9F%A5%E8%AD%98">4.1. 您可能不需要了解的知識</a></li>
<li><a href="#42-doas-%E8%88%87-sudo">4.2. <code>doas</code> 與 <code>sudo</code></a></li>
</ul>
</li>
</ul>
<h2 id="1-快速上手"><a class="header" href="#1-快速上手">1. 快速上手</a></h2>
<p>注意：
目前，儘管本專案相關倉庫已經搭建完成，但是絕大多數軟體包仍處於未完成狀態。<br />
之後，本專案的相關包名將可能會被命名為 <code>tmoe-2021</code>, <code>tmm</code> 和 <code>tmoe</code></p>
<h3 id="11-apt"><a class="header" href="#11-apt">1.1. apt</a></h3>
<h4 id="111-debian"><a class="header" href="#111-debian">1.1.1. debian</a></h4>
<p><img src="assets/logo/debian.svg" alt="debian" /></p>
<ul>
<li>系統要求
<ul>
<li>支援
<ul>
<li>Debian GNU/Linux
<ul>
<li>目前支援的最低版本為 Debian 9 Stretch</li>
<li>由於 Stretch 已經 EOL, 之後最低版本可能會升級至 Buster</li>
</ul>
</li>
</ul>
</li>
<li>不支援
<ul>
<li>Debian GNU/Hurd 和 kFreeBSD</li>
</ul>
</li>
</ul>
</li>
</ul>
<pre><code class="language-sh">su -c &quot;apt update; apt install doas curl&quot;
su -c &quot;echo 'permit nopass $(id -un) cmd apt' &gt;&gt; /etc/doas.conf&quot;

curl -LO https://l.tmoe.me/neko.deb
doas apt install ./neko.deb
rm -v neko.deb
doas apt update
doas apt install toy-repo
</code></pre>
<blockquote>
<p>在題外話中，本專案開發者將介紹：為什麼是 OpenBSD <code>doas</code> 而非 <code>sudo</code></p>
</blockquote>
<h4 id="112-ubuntu"><a class="header" href="#112-ubuntu">1.1.2. ubuntu</a></h4>
<p><img src="assets/logo/ubuntu.svg" alt="ubuntu" /></p>
<pre><code class="language-sh">sudo apt update
sudo apt install -y wget
wget l.tmoe.me/neko.deb
sudo apt install ./neko.deb
rm -v neko.deb
sudo apt update
sudo apt install uuu-repo
</code></pre>
<h4 id="113-termux"><a class="header" href="#113-termux">1.1.3. termux</a></h4>
<img src="./assets/logo/termux.svg" width="128" height="128"/>
<blockquote>
<p>File: termux.svg<br />
License: CC BY-SA 4.0<br />
Origin: Termux.com - <a href="https://termux.com/">https://termux.com/</a></p>
</blockquote>
<pre><code class="language-sh">curl -LO l.tmoe.me/tinor.deb
apt install ./tinor.deb
apt update
</code></pre>
<h3 id="12-pacman"><a class="header" href="#12-pacman">1.2. pacman</a></h3>
<p><img src="assets/logo/arch.svg" alt="arch" /></p>
<p>開發者還在咕咕咕中 ...</p>
<h2 id="2-debian-based-ubuntu-mint-kali"><a class="header" href="#2-debian-based-ubuntu-mint-kali">2. Debian-based (ubuntu, mint, kali)</a></h2>
<p>從理論上說，您不應該混用 debian 和 ubuntu 的軟體源。<br />
因為這會破壞系統的依賴關係。</p>
<p>您如果之前一直都是這麼幹的，那麼需要多瞭解一下 debian。<br />
您可以閱讀 <a href="https://www.debian.org/doc/manuals/debian-reference/">debian 參考手冊（Osamu Aoki 青木修 著）</a>。</p>
<h3 id="21-通用"><a class="header" href="#21-通用">2.1. 通用</a></h3>
<p>那麼問題來了。<br />
既然混用源的問題這麼嚴重，那為什麼本專案還是有通用倉庫呢？</p>
<p>答案是：</p>
<ul>
<li>靜態編譯</li>
<li>低版本依賴</li>
<li>以及 &quot;all&quot; 架構的軟體包。</li>
</ul>
<p>實際上，對於不能通用的包來說，開發者會為它們建立單獨的倉庫。</p>
<p>對於 debian-based 發行版來說，本專案通用的倉庫名為 &quot;neko&quot;。</p>
<h4 id="211-詳細說明"><a class="header" href="#211-詳細說明">2.1.1. 詳細說明</a></h4>
<ul>
<li>
<p>要求：</p>
<ul>
<li>系統版本： debian 9 (stretch) &amp; ubuntu 16.04(xenial)
<ul>
<li>依賴: <code>apt-transport-https</code>, <code>ca-certificates</code></li>
</ul>
</li>
<li>系統版本：debian 10 (buster), ubuntu 18.04 (bionic) 及其以上的系統
<ul>
<li>依賴: <code>ca-certificates</code></li>
</ul>
</li>
</ul>
</li>
</ul>
<p>以下例子將使用 <code>curl</code><br />
您也可以換用其他下載工具，例如 <code>wget2</code> 或 <code>aria2</code></p>
<blockquote>
<p>以下內容可以直接編輯</p>
</blockquote>
<pre><code class="language-sh editable">apt update
apt install -y curl

# 下載並安裝 tmoe 的 neko 倉庫
curl -LO https://l.tmoe.me/neko.deb
apt install ./neko.deb
# 這個 deb 包對您的系統做了什麼呢？
# 在 /etc/apt/sources.list.d/ 目錄下建立了源列表：
# neko-repo.sources (許可權為644,所屬為0:0)
# 在本書的換源部分將介紹這種格式
# 還有 OpenPGP(GnuPG) 公鑰：
# /usr/share/keyrings/tmoe-archive-keyring.gpg (許可權同上)
# 並且在 /etc/apt/preferences.d/50-neko-repository 中調整了軟體包優先順序
# 注：此 deb 包不依賴 gnupg(完整版)， 只需要 apt 自身依賴的 gpgv(簡化版gnupg) 就可以了

# 刪除 deb 包
rm -fv ./neko.deb
# 更新索引資訊
apt update
</code></pre>
<h4 id="212-neko-repo-詳情"><a class="header" href="#212-neko-repo-詳情">2.1.2. neko-repo 詳情</a></h4>
<pre><code class="language-sh">apt show neko-repo
</code></pre>
<pre><code class="language-yaml">Package: neko-repo
Version: 0.0.1-12
Priority: standard
Section: misc
Maintainer: Moe Master &lt;m@tmoe.me&gt;
Installed-Size: 30.7 kB
Provides: set-src-list, update-neko-key
Depends: apt (&gt;= 1.1.0)
Recommends: ca-certificates
Suggests: curl | wget
Homepage: https://packages.tmoe.me/deb/dists/neko/
Download-Size: 5,232 B
APT-Manual-Installed: yes
APT-Sources: https://packages.tmoe.me/deb neko/main amd64 Packages
Description: Neko repository, QwQ
  It includes some useful packages.
  The minimum supported version of this repository is debian 9 (Stretch),
  you should not install it on debian 8 (Jessie).
</code></pre>
<p>讓我們來看一下 <code>neko-repo</code> 提供了什麼東西</p>
<ul>
<li><code>set-src-list</code>
<ul>
<li>我們將會在“倉庫/更換映象源”中介紹到它</li>
</ul>
</li>
<li><code>update-neko-key</code>
<ul>
<li>用於更新公鑰</li>
</ul>
</li>
</ul>
<h4 id="213-更新公鑰"><a class="header" href="#213-更新公鑰">2.1.3. 更新公鑰</a></h4>
<p>在極其特殊的情況下，neko 倉庫的 OpenPGP 公鑰可能會失效。<br />
在這種情況下，您就不能用 <code>apt-get install</code> 來更新 neko 倉庫的 keyring 了，而要用 <code>neko-repo</code> 自帶的一個命令。</p>
<p>執行</p>
<pre><code class="language-sh">update-neko-key
</code></pre>
<p>它會輸出以下內容</p>
<pre><code class="language-sh">It can update the OpenPGP pub keyring: &quot;/usr/share/keyrings/tmoe-archive-keyring.gpg&quot;

-d | --downloader: You can specify the downloader.

For example, you can run &quot;update-neko-key -d curl&quot; to use curl.
Run &quot;update-neko-key -d wget&quot; to use wget.
</code></pre>
<p>簡單來說，您需要手動指定一個下載器。<br />
現在只支援</p>
<ul>
<li><code>curl</code></li>
<li><code>wget</code></li>
<li><code>wget2</code></li>
<li><code>aria2c</code></li>
</ul>
<p>用法很簡單，以 root 身份執行 <code>update-neko-key -d curl</code>。</p>
<blockquote>
<p>如果沒有 root 許可權，那麼它將無法修改 &quot;/usr/share/keyrings/tmoe-archive-keyring.gpg&quot;。</p>
</blockquote>
<p>這個工具的邏輯非常簡單。</p>
<ul>
<li>若您的系統已經安裝了 <code>gnupg</code>，那麼它將從相關倉庫獲取 <a href="https://salsa.debian.org/mm/repo/-/blob/master/src/deb/debian/repo/common/neko-repo/current/tmoe-archive-keyring.asc">ascii 格式的 OpenPGP 公鑰</a>，並將其轉換為二進位制格式，最後覆蓋原來的公鑰。</li>
<li>若您的系統沒有安裝 <code>gnupg</code>, 或者轉換過程出錯了，那麼它將直接從相關網站獲取二進位制格式的公鑰。</li>
</ul>
<p>如果沒有意外的話，您可能十年都不需要呼叫此命令去更新公鑰。<br />
至於開發者能不能為本專案用愛發電十年就是另一回事了。</p>
<h3 id="22-toy-repo"><a class="header" href="#22-toy-repo">2.2. toy-repo</a></h3>
<p>與 <strong>neko-repo</strong> 不同，<strong>toy-repo</strong> 並非完全通用的。
它只能給 <strong>debian</strong> 用，不能給 <strong>ubuntu</strong> 用。</p>
<h4 id="221-詳情"><a class="header" href="#221-詳情">2.2.1. 詳情</a></h4>
<pre><code class="language-sh">apt show toy-repo
</code></pre>
<pre><code class="language-yaml">Package: toy-repo
Version: 0.0.1-4
Priority: optional
Section: misc
Maintainer: Moe Master &lt;m@tmoe.me&gt;
Installed-Size: 19.5 kB
Depends: apt (&gt;= 1.1.0), neko-repo
Suggests: ca-certificates
Homepage: https://packages.tmoe.me/deb/dists/toy
Download-Size: 2,484 B
APT-Manual-Installed: yes
APT-Sources: https://packages.tmoe.me/deb neko/main amd64 Packages
Description: A repository for debian only
  Toy is a wonderful thing.
  Let's keep our childishness and optimism!
  Go after the good things in the toy-repo!
  The source file will be placed in &quot;/etc/apt/sources.list.d/toy-repo.sources&quot;
</code></pre>
<p>遺憾的是，toy-repo(玩具倉庫)自身並沒有什麼有用的東西。<br />
有用的東西都在倉庫裡面，您需要以 root 身份執行 <code>apt install</code> 來安裝您心儀的玩具。</p>
<p>玩具是一個很美好的東西，開發者將其命名為 <strong>toy</strong>，並沒有抱著做“玩具專案” 這種消極的想法。<br />
與 debian 的 玩具總動員系列的代號類似。<br />
保持童真，以及積極向上的態度是非常重要的。<br />
<strong>toy</strong> 這個詞還包含了開發者對美好生活的嚮往。<br />
這個世界是非常複雜的，像孩童一樣追求著簡簡單單的快樂是一件非常非常幸福的事情。</p>
<h3 id="23-uuu-repo"><a class="header" href="#23-uuu-repo">2.3. uuu-repo</a></h3>
<p>與 <strong>neko-repo</strong> 和 <strong>toy-repo</strong> 都不同。<br />
uuu 倉庫只能給 <strong>ubuntu</strong> 用，不能給 <strong>debian</strong> 用。</p>
<h4 id="231-說明"><a class="header" href="#231-說明">2.3.1. 說明</a></h4>
<p>uuu 倉庫對於 ubuntu 來說是通用的。</p>
<p>本專案之後可能還會有 &quot;focal-repo&quot; 這種只能給單獨的版本使用的倉庫。</p>
<h2 id="3-android"><a class="header" href="#3-android">3. Android</a></h2>
<h3 id="31-termux"><a class="header" href="#31-termux">3.1. termux</a></h3>
<h4 id="311-tinor"><a class="header" href="#311-tinor">3.1.1. tinor</a></h4>
<p>TINOR Is Not Official Repository.</p>
<p>把軟體包拆出來，看看裡面有什麼東西吧！</p>
<pre><code class="language-tree  editable">├── control
│   ├── conffiles
│   ├── control
│   ├── md5sums
│   ├── postinst
│   └── postrm
└── data
    └── data
        └── data
            └── com.termux
                └── files
                    └── usr
                        ├── bin
                        │   ├── set-src-list
                        │   └── update-tinor-key
                        ├── etc
                        │   └── tmoe
                        │       └── repo
                        │           └── apt
                        │               ├── preferences.d
                        │               │   └── 50-tinor
                        │               └── sources.list.d
                        │                   └── tinor.sources
                        └── share
                            ├── doc
                            │   └── tinor-repo
                            │       ├── changelog.Debian
                            │       └── copyright
                            └── keyrings
                                └── tmoe-archive-keyring.gpg
</code></pre>
<p>在安裝 deb 包，執行 <code>postinst</code> 的 <strong>configure</strong> 階段時， <code>postinst</code> 會在 <code>$PREFIX/etc/apt/sources.list.d</code> 和 <code>$PREFIX/etc/apt/preferences.d</code> 處建立與 <strong>tinor</strong> 相關的軟連結；<br />
解除安裝軟體包，執行 <code>postrm</code> 的 <strong>purge</strong> 或 <strong>remove</strong> 階段時，<code>postrm</code> 會自動刪掉軟連結。</p>
<p>可以看出來，它的結構與 <code>neko-repo</code> 是極其相似的，只是路徑不一樣。</p>
<h2 id="4-題外話"><a class="header" href="#4-題外話">4. 題外話</a></h2>
<h3 id="41-您可能不需要了解的知識"><a class="header" href="#41-您可能不需要了解的知識">4.1. 您可能不需要了解的知識</a></h3>
<div style="display:none">
```mermaid
graph TD
    D(錯誤示範)
    A[A:glibc2.33] --> |使用| B
    B[B:glibc2.35] --> |提供| b
    A --> |安裝| b[c:依賴glibc]
```
</div>
<p><img src="assets/add-repo_error-dep.svg" alt="add-repo_error-dep" /></p>
<p>如果您一定要混用軟體源, 那麼請在高版本系統中使用低版本系統的源。<br />
否則將出現以下的情況：<br />
比如系統 A 的 glibc 版本是 2.33，B 是 2.35。<br />
B 的某個軟體 b 依賴了 glibc。<br />
如果您在 A 上用了 B 的源，然後又安裝了 b ，那麼 glibc 可能也被升到了 2.35。<br />
這時候 A 上一大堆系統相關軟體要麼跟著升級，要麼可能會出現不可預料的“不穩定性”。</p>
<p>如果您想要將一個系統完全變成另一個系統的模樣，那麼結論與上面完全相反，您得要像上面那張流程圖那樣做才行。<br />
這樣做相當於從低版本系統升級到高版本。</p>
<p>比如說您想要將 debian 更換為 kali 源，這時候應該用低版本的 debian stable 新增高版本的 kali rolling 源，而不能用高版本的 debian sid 來新增低版本 kali rolling 源。</p>
<blockquote>
<p>這裡的高低是相對而言的。</p>
</blockquote>
<p>在使用完 <code>apt dist-upgrade</code> 更新完所有軟體包後，您的系統的內部就已經變成 kali 的形狀了。<br />
在沒有快照或備份的情況下，這麼做就已經回不了頭了。</p>
<h3 id="42-doas-與-sudo"><a class="header" href="#42-doas-與-sudo">4.2. <code>doas</code> 與 <code>sudo</code></a></h3>
<p>Q: 為什麼是 <code>doas</code>， 而非 <code>sudo</code>?</p>
<p>A: 截至 2022-06-20，相較於 <code>sudo</code>, <code>doas</code> 的程式碼量更少，出現安全漏洞的頻率也更低。</p>
<p>從客觀的角度來看：因為用的人少，所以安全漏洞被揭露的可能性更低。<br />
從 2moe 個人（主觀）的角度來看：OpenBSD 那邊對安全問題可能會更走心一點。</p>
<blockquote>
<p>The doas tool was originally written for OpenBSD by Ted Unangst.</p>
</blockquote>

                        <div id="giscus-container"></div>
                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="repo.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                            <a rel="next" href="mirror-repo.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="repo.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                    <a rel="next" href="mirror-repo.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>

        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        <script src="ace.js" type="text/javascript" charset="utf-8"></script>
        <script src="editor.js" type="text/javascript" charset="utf-8"></script>
        <script src="mode-rust.js" type="text/javascript" charset="utf-8"></script>
        <script src="theme-dawn.js" type="text/javascript" charset="utf-8"></script>
        <script src="theme-tomorrow_night.js" type="text/javascript" charset="utf-8"></script>
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>
        <script type="text/javascript" charset="utf-8">
        var pagePath = "add-repo.md"
        </script>


        <!-- Custom JS scripts -->
        <script type="text/javascript" src="assets/giscus.js"></script>
    </body>
</html>